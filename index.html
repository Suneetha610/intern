<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jarurat Care - Patient Records Dashboard</title>
  <style>
    :root{
      --accent:#1f7a8c;
      --accent-2:#32b7c6;
      --bg:#f3f7f8;
      --card:#ffffff;
      --muted:#6b7280;
      --max-width:1100px;
      --radius:12px;
      --soft-border: rgba(15,23,42,0.05);
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,var(--bg) 0%, #ffffff 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding-bottom:40px;
    }

    header{
      background:rgba(255,255,255,0.85);
      backdrop-filter: blur(6px);
      border-bottom:1px solid var(--soft-border);
      position:sticky;
      top:0;
      z-index:30;
    }
    .container{
      max-width:var(--max-width);
      margin:0 auto;
      padding:18px;
    }
    .top{
      display:flex;
      align-items:center;
      gap:16px;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      font-weight:700;
      color:var(--accent);
    }
    .brand .logo{
      width:46px;height:46px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:18px;
      box-shadow:0 6px 18px rgba(31,122,140,0.08);
    }
    nav a{
      margin-left:12px;
      text-decoration:none;
      color:#0f172a;
      padding:8px 12px;border-radius:10px;font-weight:600;
      opacity:.95;
    }
    nav a.active{
      background:linear-gradient(90deg, rgba(31,122,140,0.12), rgba(50,183,198,0.08));
      color:var(--accent);
      box-shadow: inset 0 -2px 0 rgba(31,122,140,0.06);
    }

    main{
      padding:28px 12px;
      max-width:var(--max-width);
      margin:0 auto;
    }

    /* Hero / home */
    .hero{
      background: linear-gradient(135deg, rgba(50,183,198,0.06), rgba(255,255,255,0.02));
      border-radius:var(--radius);
      padding:28px;
      display:flex;
      gap:24px;
      align-items:center;
      margin-bottom:20px;
      border:1px solid var(--soft-border);
    }
    .hero-left{flex:1}
    .hero h1{
      margin:0 0 8px 0;
      font-size:22px;
      letter-spacing:-0.3px;
      color:#0b1220;
    }
    .hero p{margin:0;color:var(--muted);line-height:1.45;font-size:15px}

    .hero-cta{
      margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;
    }
    .btn{
      background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;
      box-shadow:0 8px 24px rgba(31,122,140,0.08);font-weight:700;
    }
    .btn.secondary{background:#fff;color:var(--accent);border:1px solid rgba(31,122,140,0.06);box-shadow:none}

    /* info row on home */
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:14px}
    .info-card{
      background:var(--card);padding:14px;border-radius:10px;border:1px solid var(--soft-border);
      box-shadow:0 12px 30px rgba(2,6,23,0.03);
    }
    .info-card h4{margin:0 0 6px 0}
    .info-card p{margin:0;color:var(--muted);font-size:13px}

    /* About page styling */
    .about{
      background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
      border-radius:12px;padding:18px;border:1px solid var(--soft-border);
    }
    .about h2{margin-top:0}
    .about p{color:var(--muted);line-height:1.5}

    /* Patients Controls */
    .controls{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
      flex-wrap:wrap;
    }
    .search{
      flex:1;min-width:220px;
      display:flex;gap:8px;align-items:center;
      background:#fff;padding:10px;border-radius:12px;border:1px solid var(--soft-border);
      box-shadow:0 6px 18px rgba(2,6,23,0.03);
    }
    .search input{
      border:0;outline:0;font-size:14px;width:100%;
    }

    /* grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
      gap:12px;
    }
    .card{
      background:var(--card);
      border-radius:12px;padding:16px;
      box-shadow:0 10px 30px rgba(2,6,23,0.03);
      display:flex;flex-direction:column;gap:10px;
      cursor:pointer;border:1px solid var(--soft-border);
      transition:transform .14s ease, box-shadow .14s ease;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(2,6,23,0.06)}
    .meta-top{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .meta-top h3{margin:0;font-size:15px}
    .meta p{margin:0;color:var(--muted);font-size:13px}

    /* disease pill */
    .disease-pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:12px;
      color:white;
      background:linear-gradient(90deg, var(--accent), var(--accent-2));
      box-shadow:0 6px 18px rgba(31,122,140,0.06);
    }
    .disease-pill.na{
      background:linear-gradient(90deg,#9aa5ad,#bfc9cc);
      color:#08303a;
    }

    /* modal */
    .modal-backdrop{
      position:fixed;inset:0;background:rgba(3,7,18,0.5);display:none;align-items:center;justify-content:center;
      z-index:60;padding:20px;
    }
    .modal{
      background:var(--card);border-radius:14px;max-width:720px;width:100%;padding:18px;box-shadow:0 30px 80px rgba(2,6,23,0.4);
      max-height:90vh;overflow:auto;border:1px solid rgba(15,23,42,0.06);
    }
    .modal .close{float:right;background:transparent;border:0;font-size:20px;cursor:pointer;color:var(--muted)}
    .modal .details{display:flex;gap:18px;align-items:flex-start;flex-direction:column}
    .detail-right h2{margin:0 0 8px 0}
    .small{font-size:13px;color:var(--muted)}

    /* form */
    .form-row{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}
    .form-row input, .form-row select, .form-row textarea{
      padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.04);background:#fff;flex:1;min-width:120px;
    }

    /* loader & empty state */
    .state{display:flex;gap:10px;align-items:center;color:var(--muted);padding:18px;background:#fff;border-radius:10px;border:1px solid var(--soft-border)}

    /* responsive */
    @media (max-width:720px){
      .hero{flex-direction:column;align-items:flex-start}
      .controls{flex-direction:column;align-items:stretch}
      nav{display:flex}
      .grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}
    }
  </style>
</head>
<body>
  <header>
    <div class="container top">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="brand">
          <div class="logo">JC</div>
          <div>
            <div style="font-size:14px">Jarurat Care</div>
            <div style="font-size:12px;color:var(--muted)">Patient Records</div>
          </div>
        </div>
      </div>
      <nav aria-label="Main navigation">
        <a href="#/" id="nav-home" class="active">Home</a>
        <a href="#/patients" id="nav-patients">Patients</a>
        <a href="#/about" id="nav-about">About</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Views will be injected -->
    <div id="view" class="container"></div>
  </main>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document">
      <button class="close" id="modalClose" aria-label="Close">&times;</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <script>
    // App state - local-only, now includes disease field
    const state = {
      patients: [
        { id: 'local-1', fullName: 'Asha Patel', email: 'asha.patel@example.com', phone: '9876543210', gender: 'female', age: 29, location: 'Ahmedabad, Gujarat', disease: 'Diabetes' },
        { id: 'local-2', fullName: 'Ravi Kumar', email: 'ravi.kumar@example.com', phone: '9123456780', gender: 'male', age: 42, location: 'Mumbai, Maharashtra', disease: 'Hypertension' },
        { id: 'local-3', fullName: 'Sunita Rao', email: 'sunita.rao@example.com', phone: '9012345678', gender: 'female', age: 35, location: 'Bengaluru, Karnataka', disease: 'NA' }
      ],
      query: ''
    };

    // Utilities
    const viewEl = document.getElementById('view');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');

    // Router
    function router() {
      const hash = location.hash || '#/';
      document.querySelectorAll('nav a').forEach(a => a.classList.toggle('active', a.getAttribute('href') === hash));
      if (hash === '#/' || hash === '#') renderHome();
      else if (hash.startsWith('#/patients')) renderPatientsView();
      else if (hash === '#/about') renderAbout();
      else renderHome();
    }

    // Home
    function renderHome(){
      const total = state.patients.length;
      const diseases = Array.from(new Set(state.patients.map(p => (p.disease || 'NA').toUpperCase())));
      viewEl.innerHTML = `
        <section class="hero">
          <div class="hero-left">
            <h1>Jarurat Care — Patient Records Dashboard</h1>
            <p>Manage patient entries locally. Disease information is included for each patient. Use the Patients page to search, view details, add or edit patients (local only — no external data or profile images).</p>
            <div class="hero-cta">
              <a class="btn" href="#/patients">View Patients</a>
              <button class="btn secondary" id="home-add">Add Patient</button>
            </div>
            <div style="margin-top:14px" class="info-grid">
              <div class="info-card">
                <h4>Total patients</h4>
                <p>${total} patient${total !== 1 ? 's' : ''} currently stored locally.</p>
              </div>
              <div class="info-card">
                <h4>Diseases tracked</h4>
                <p>${diseases.length} unique disease${diseases.length !== 1 ? 's' : ''} (examples: ${escapeHtml(diseases.slice(0,3).join(', ')) || '—'}).</p>
              </div>
              <div class="info-card">
                <h4>Privacy-first</h4>
                <p>No external APIs or profile images are used. All data here remains on the page unless you copy it elsewhere.</p>
              </div>
            </div>
          </div>
          <div style="min-width:220px">
            <div style="background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6)); border-radius:12px; padding:14px; border:1px solid var(--soft-border)">
              <h4 style="margin:0 0 8px 0">Quick Actions</h4>
              <div style="display:flex;gap:8px;flex-direction:column">
                <a class="btn" href="#/patients">Open Patients</a>
                <button class="btn secondary" id="home-add-2">Add Patient</button>
              </div>
            </div>
          </div>
        </section>

        <section style="margin-top:18px">
          <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
            <h3 style="margin:0">Overview</h3>
          </div>
          <div style="margin-top:10px;color:var(--muted)">
            This dashboard includes a disease field per patient. You can search by disease name too. Add/edit/delete are local actions for quick prototyping.
          </div>
        </section>
      `;

      document.getElementById('home-add')?.addEventListener('click', openAddForm);
      document.getElementById('home-add-2')?.addEventListener('click', openAddForm);
    }

    // About
    function renderAbout(){
      viewEl.innerHTML = `
        <section class="about">
          <h2>About Jarurat Care Dashboard</h2>
          <p>Small front-end demonstration focused on patient records management. This version intentionally avoids external fetches and profile images: all patient entries are stored only in local page state. Disease information is included for each patient and searchable.</p>
          <p style="margin-top:12px; color:var(--muted)">If you want persistence (localStorage / backend) or an export/import feature, I can add that next.</p>
        </section>
      `;
    }

    // Patients view
    function renderPatientsView(){
      viewEl.innerHTML = `
        <section>
          <div class="controls">
            <div class="search">
              <svg width="18" height="18" viewBox="0 0 24 24" style="opacity:.6"><path fill="currentColor" d="M9.5 3A6.5 6.5 0 1 1 3 9.5 6.507 6.507 0 0 1 9.5 3m0-2A8.5 8.5 0 1 0 18 9.5 8.51 8.51 0 0 0 9.5 1z"></path></svg>
              <input id="searchInput" placeholder="Search by name, email, location or disease..." value="${escapeHtml(state.query)}" />
              <button class="btn secondary" id="clearSearchBtn">Clear</button>
            </div>

            <div style="display:flex;gap:8px">
              <button class="btn" id="openAddBtn">Add New Patient</button>
            </div>
          </div>

          <div id="stateArea"></div>
          <div id="patientsGrid" class="grid" style="margin-top:12px"></div>
        </section>
      `;

      document.getElementById('openAddBtn').addEventListener('click', openAddForm);
      const searchInput = document.getElementById('searchInput');
      const clearBtn = document.getElementById('clearSearchBtn');
      searchInput.addEventListener('input', (e) => {
        state.query = e.target.value.trim();
        renderPatients();
      });
      clearBtn.addEventListener('click', () => {
        state.query = '';
        searchInput.value = '';
        renderPatients();
      });

      renderPatients();
    }

    function renderPatients(){
      const grid = document.getElementById('patientsGrid');
      if (!grid) return;
      const q = state.query.toLowerCase();
      let filtered = state.patients.slice();
      if (q) {
        filtered = filtered.filter(p =>
          (p.fullName && p.fullName.toLowerCase().includes(q)) ||
          (p.email && p.email.toLowerCase().includes(q)) ||
          (p.location && p.location.toLowerCase().includes(q)) ||
          (p.disease && p.disease.toLowerCase().includes(q))
        );
      }
      if (filtered.length === 0){
        grid.innerHTML = `<div style="grid-column:1/-1"><div class="state">No patients found. Add a new patient or clear the search.</div></div>`;
        return;
      }

      grid.innerHTML = filtered.map(p => {
        const disease = p.disease && String(p.disease).trim() !== '' ? p.disease : 'NA';
        const pillClass = (disease.toUpperCase() === 'NA') ? 'disease-pill na' : 'disease-pill';
        return `
        <div class="card" data-id="${p.id}" tabindex="0" role="button" aria-pressed="false">
          <div class="meta-top">
            <h3>${escapeHtml(p.fullName)}</h3>
            <div class="${pillClass}">${escapeHtml(disease)}</div>
          </div>
          <div><p class="small">${escapeHtml(p.email || '—')}</p></div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <p class="small">${escapeHtml(p.location || '—')}</p>
            <p class="small">Age: ${p.age ?? '—'}</p>
          </div>
        </div>
      `}).join('');

      grid.querySelectorAll('.card').forEach(card => {
        card.addEventListener('click', () => {
          const id = card.getAttribute('data-id');
          const patient = state.patients.find(x => x.id === id);
          if (patient) openPatientModal(patient);
        });
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); }
        })
      });
    }

    // Modal for details (shows disease)
    function openPatientModal(patient){
      const disease = patient.disease && String(patient.disease).trim() !== '' ? patient.disease : 'NA';
      const pillClass = (disease.toUpperCase() === 'NA') ? 'disease-pill na' : 'disease-pill';
      modalContent.innerHTML = `
        <div>
          <button class="close" aria-hidden="true">&times;</button>
          <div class="details">
            <div class="detail-right">
              <h2>${escapeHtml(patient.fullName)}</h2>
              <div class="small">Age: ${patient.age ?? '—'} · Gender: ${escapeHtml(patient.gender || '—')} · Location: ${escapeHtml(patient.location || '—')}</div>
              <p style="margin-top:12px"><strong>Email:</strong> ${escapeHtml(patient.email || '—')}<br><strong>Phone:</strong> ${escapeHtml(patient.phone || '—')}</p>
              <p style="margin-top:12px"><strong>Disease:</strong> <span class="${pillClass}">${escapeHtml(disease)}</span></p>
              <div style="margin-top:12px">
                <button class="btn" id="editPatient">Edit</button>
                <button class="btn secondary" id="deletePatient">Delete</button>
              </div>
            </div>
          </div>
        </div>
      `;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
      modalContent.querySelector('.close').addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', backdropClick);
      document.addEventListener('keydown', onEsc);

      document.getElementById('editPatient').addEventListener('click', () => openEditForm(patient));
      document.getElementById('deletePatient').addEventListener('click', () => {
        if (confirm('Delete this patient? This action cannot be undone in this demo.')) {
          state.patients = state.patients.filter(p => p.id !== patient.id);
          closeModal();
          renderPatients();
        }
      });
    }

    function closeModal(){
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      modalContent.innerHTML = '';
      modalBackdrop.removeEventListener('click', backdropClick);
      document.removeEventListener('keydown', onEsc);
    }
    function backdropClick(e){
      if (e.target === modalBackdrop) closeModal();
    }
    function onEsc(e){
      if (e.key === 'Escape') closeModal();
    }
    modalClose.addEventListener('click', closeModal);

    // Add new patient form (local)
    function openAddForm(){
      modalContent.innerHTML = `
        <div>
          <button class="close" aria-hidden="true">&times;</button>
          <h3>Add New Patient</h3>
          <div style="margin-top:8px">
            <div class="form-row">
              <input id="newFirst" placeholder="First name" />
              <input id="newLast" placeholder="Last name" />
            </div>
            <div class="form-row">
              <input id="newEmail" placeholder="Email" />
              <input id="newPhone" placeholder="Phone" />
            </div>
            <div class="form-row">
              <select id="newGender">
                <option value="">Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
              <input id="newLocation" placeholder="Location (city, state)" />
            </div>
            <div class="form-row">
              <input id="newAge" placeholder="Age" type="number" min="0" />
              <input id="newDisease" placeholder="Disease (e.g. Diabetes, NA)" />
            </div>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn" id="saveNew">Save</button>
              <button class="btn secondary" id="cancelNew">Cancel</button>
            </div>
          </div>
        </div>
      `;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
      modalContent.querySelector('.close').addEventListener('click', closeModal);
      document.getElementById('cancelNew').addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', backdropClick);
      document.addEventListener('keydown', onEsc);
      document.getElementById('saveNew').addEventListener('click', saveNewPatient);
    }

    function saveNewPatient(){
      const first = document.getElementById('newFirst').value.trim();
      const last = document.getElementById('newLast').value.trim();
      const email = document.getElementById('newEmail').value.trim();
      const phone = document.getElementById('newPhone').value.trim();
      const gender = document.getElementById('newGender').value;
      const location = document.getElementById('newLocation').value.trim();
      const ageVal = document.getElementById('newAge').value;
      const age = ageVal ? parseInt(ageVal, 10) : null;
      const disease = document.getElementById('newDisease').value.trim() || 'NA';
      if (!first || !last || !email) {
        alert('Please fill at least first, last and email.');
        return;
      }
      const newPatient = {
        id: 'local-' + Date.now(),
        fullName: `${first} ${last}`,
        email,
        phone,
        gender,
        age,
        location,
        disease
      };
      // insert at front
      state.patients.unshift(newPatient);
      closeModal();
      renderPatients();
    }

    // Edit patient (simple inline form)
    function openEditForm(patient){
      modalContent.innerHTML = `
        <div>
          <button class="close" aria-hidden="true">&times;</button>
          <h3>Edit Patient</h3>
          <div style="margin-top:8px">
            <div class="form-row">
              <input id="editFirst" placeholder="First name" value="${escapeHtml(splitName(patient.fullName).first)}" />
              <input id="editLast" placeholder="Last name" value="${escapeHtml(splitName(patient.fullName).last)}" />
            </div>
            <div class="form-row">
              <input id="editEmail" placeholder="Email" value="${escapeHtml(patient.email || '')}" />
              <input id="editPhone" placeholder="Phone" value="${escapeHtml(patient.phone || '')}" />
            </div>
            <div class="form-row">
              <select id="editGender">
                <option value="">Gender</option>
                <option value="male" ${patient.gender === 'male' ? 'selected' : ''}>Male</option>
                <option value="female" ${patient.gender === 'female' ? 'selected' : ''}>Female</option>
                <option value="other" ${patient.gender === 'other' ? 'selected' : ''}>Other</option>
              </select>
              <input id="editLocation" placeholder="Location" value="${escapeHtml(patient.location || '')}" />
            </div>
            <div class="form-row">
              <input id="editAge" placeholder="Age" type="number" min="0" value="${patient.age ?? ''}" />
              <input id="editDisease" placeholder="Disease" value="${escapeHtml(patient.disease || '')}" />
            </div>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn" id="saveEdit">Save</button>
              <button class="btn secondary" id="cancelEdit">Cancel</button>
            </div>
          </div>
        </div>
      `;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
      modalContent.querySelector('.close').addEventListener('click', closeModal);
      document.getElementById('cancelEdit').addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', backdropClick);
      document.addEventListener('keydown', onEsc);
      document.getElementById('saveEdit').addEventListener('click', () => {
        const first = document.getElementById('editFirst').value.trim();
        const last = document.getElementById('editLast').value.trim();
        const email = document.getElementById('editEmail').value.trim();
        const phone = document.getElementById('editPhone').value.trim();
        const gender = document.getElementById('editGender').value;
        const location = document.getElementById('editLocation').value.trim();
        const ageVal = document.getElementById('editAge').value;
        const age = ageVal ? parseInt(ageVal, 10) : null;
        const disease = document.getElementById('editDisease').value.trim() || 'NA';
        if (!first || !last || !email) {
          alert('Please fill at least first, last and email.');
          return;
        }
        // update
        const idx = state.patients.findIndex(p => p.id === patient.id);
        if (idx > -1) {
          state.patients[idx] = {
            ...state.patients[idx],
            fullName: `${first} ${last}`,
            email,
            phone,
            gender,
            location,
            age,
            disease
          };
          closeModal();
          renderPatients();
        }
      });
    }

    // Helpers
    function splitName(full){
      if (!full) return {first:'', last:''};
      const parts = full.split(' ');
      return { first: parts[0] || '', last: parts.slice(1).join(' ') || '' };
    }
    function escapeHtml(str){
      if (str === null || str === undefined) return '';
      return String(str).replace(/[&<>"']/g, function(m){return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m];});
    }

    // Init
    window.addEventListener('hashchange', router);
    window.addEventListener('load', () => {
      router();
    });
  </script>
</body>
</html>
